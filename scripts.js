// Language translations JSON mapping
const translations = {
    pt: {
        // Logo/Header
        website_title: "QUIOSQUE AL FORNO",
        
        // Pizza names and descriptions
        pepperoni_title: "PEPPERONI",
        pepperoni_desc: "Pepperoni, mozzarella, mascarpone and parmesan cheeses, tomato puree with herbs.",
        camponesa_title: "CAMPONESA",
        camponesa_desc: "Mozzarella, mascarpone and parmesan cheeses, tomato puree with herbs.",
        tentacao_title: "TENTAÇÃO",
        tentacao_desc: "Spinach with mascarpone and nutmeg sauce, gouda, mozzarella and parmesan cheeses, ham, pumpkin seeds.",
        saborosa_title: "SABOROSA",
        saborosa_desc: "Mozzarella, tomato sauce, fresh basil, olive oil, and traditional Portuguese flavors.",
        pedecabra_title: "PÉ DE CABRA",
        pedecabra_desc: "Goat cheese, caramelized onions, fresh thyme, honey drizzle, and a blend of premium cheeses.",
        margherita_title: "MARGHERITA",
        margherita_desc: "Fresh mozzarella, tomato sauce, basil leaves, extra virgin olive oil, and a pinch of sea salt.",
        
        // Allergy info
        allergy_info: "Para obter informações sobre alergénios e substâncias que causam intolerância em pratos de comida, pergunte à staff",
        
        // Menu button
        menu_button: "Ver Menu Completo",
        
        // Order section
        order_title: "ENCOMENDAR",
        order_call: "por chamada",
        
        // Hours section
        hours_title: "HORÁRIO",
        monday: "Segunda-feira: Encerrado",
        tuesday: "Terça-feira: Encerrado",
        wednesday: "Quarta-feira: 18:30 – 21:15",
        thursday: "Quinta-feira: 18:30 – 21:15",
        friday: "Sexta-feira: 18:00 – 21:30",
        saturday: "Sábado: 18:00 – 21:45",
        sunday: "Domingo: 18:00 – 21:15",
        
        // Catering section
        catering_title: "CATERING",
        catering_desc: "Disponível para eventos especiais e festas privadas",
        catering_group_size: "Grupos de 15-100 pessoas",
        catering_menu: "Menu personalizado",
        catering_location: "No local à sua escolha",
        catering_contact: "Entre em contacto para orçamentos:",
        catering_note: "Por favor, inclua os seguintes detalhes para orçamento:",
        catering_people: "Número de pessoas",
        catering_place: "Localização",
        catering_date: "Data e hora",
        catering_event: "Tipo de evento ou ocasião",
        
        // Location section
        location_title: "LOCALIZAÇÃO",
        address_line1: "Assumadas-Tunes, estrada nacional 269",
        address_line2: "8365-235 Silves",
        
        // Social media section
        social_title: "SIGA-NOS",
        
        // Footer
        contact: "contact:",
        
        // Catering page
        catering_hero_title: "Catering Events",
        catering_hero_subtitle: "Pizza autêntica em forno a lenha para o seu evento especial",
        catering_email_title: "Entre em Contacto",
        catering_email_text1: "Oferecemos serviço de catering para eventos corporativos, casamentos e festas privadas. Para solicitar mais informações ou obter um orçamento personalizado, entre em contacto connosco por e-mail:",
        catering_email_text2: "Ou contacte-nos diretamente por telefone:"
    },
    
    en: {
        // Logo/Header
        website_title: "QUIOSQUE AL FORNO",
        
        // Pizza names and descriptions
        pepperoni_title: "PEPPERONI",
        pepperoni_desc: "Pepperoni, mozzarella, mascarpone and parmesan cheeses, tomato puree with herbs.",
        camponesa_title: "COUNTRY STYLE",
        camponesa_desc: "Mozzarella, mascarpone and parmesan cheeses, tomato puree with herbs.",
        tentacao_title: "TEMPTATION",
        tentacao_desc: "Spinach with mascarpone and nutmeg sauce, gouda, mozzarella and parmesan cheeses, ham, pumpkin seeds.",
        saborosa_title: "DELICIOUS",
        saborosa_desc: "Mozzarella, tomato sauce, fresh basil, olive oil, and traditional Portuguese flavors.",
        pedecabra_title: "GOAT'S FOOT",
        pedecabra_desc: "Goat cheese, caramelized onions, fresh thyme, honey drizzle, and a blend of premium cheeses.",
        margherita_title: "MARGHERITA",
        margherita_desc: "Fresh mozzarella, tomato sauce, basil leaves, extra virgin olive oil, and a pinch of sea salt.",
        
        // Allergy info
        allergy_info: "For information about allergens and substances that cause intolerance in food dishes, please ask our staff",
        
        // Menu button
        menu_button: "View Full Menu",
        
        // Order section
        order_title: "ORDER",
        order_call: "by phone",
        
        // Hours section
        hours_title: "OPENING HOURS",
        monday: "Monday: Closed",
        tuesday: "Tuesday: Closed",
        wednesday: "Wednesday: 18:30 – 21:15",
        thursday: "Thursday: 18:30 – 21:15",
        friday: "Friday: 18:00 – 21:30",
        saturday: "Saturday: 18:00 – 21:45",
        sunday: "Sunday: 18:00 – 21:15",
        
        // Catering section
        catering_title: "CATERING",
        catering_desc: "Available for special events and private parties",
        catering_group_size: "Groups of 15-100 people",
        catering_menu: "Customized menu",
        catering_location: "At your chosen location",
        catering_contact: "Contact us for quotes:",
        catering_note: "Please include the following details for a quote:",
        catering_people: "Number of people",
        catering_place: "Location",
        catering_date: "Date and time",
        catering_event: "Type of event or occasion",
        
        // Location section
        location_title: "LOCATION",
        address_line1: "Assumadas-Tunes, national road 269",
        address_line2: "8365-235 Silves",
        
        // Social media section
        social_title: "FOLLOW US",
        
        // Footer
        contact: "contact:",
        
        // Catering page
        catering_hero_title: "Catering Events",
        catering_hero_subtitle: "Authentic wood-fired pizza for your special event",
        catering_email_title: "Contact Us",
        catering_email_text1: "We offer catering services for corporate events, weddings, and private parties. To request more information or get a personalized quote, please contact us by email:",
        catering_email_text2: "Or contact us directly by phone:"
    },
    
    fr: {
        // Logo/Header
        website_title: "QUIOSQUE AL FORNO",
        
        // Pizza names and descriptions
        pepperoni_title: "PEPPERONI",
        pepperoni_desc: "Pepperoni, mozzarella, mascarpone et parmesan, purée de tomates aux herbes.",
        camponesa_title: "CAMPAGNARDE",
        camponesa_desc: "Mozzarella, mascarpone et parmesan, purée de tomates aux herbes.",
        tentacao_title: "TENTATION",
        tentacao_desc: "Épinards à la sauce mascarpone et muscade, gouda, mozzarella et parmesan, jambon, graines de courge.",
        saborosa_title: "DÉLICIEUSE",
        saborosa_desc: "Mozzarella, sauce tomate, basilic frais, huile d'olive et saveurs traditionnelles portugaises.",
        pedecabra_title: "PIED DE CHÈVRE",
        pedecabra_desc: "Fromage de chèvre, oignons caramélisés, thym frais, filet de miel et un mélange de fromages premium.",
        margherita_title: "MARGHERITA",
        margherita_desc: "Mozzarella fraîche, sauce tomate, feuilles de basilic, huile d'olive extra vierge et une pincée de sel de mer.",
        
        // Allergy info
        allergy_info: "Pour obtenir des informations sur les allergènes et les substances qui provoquent des intolérances dans les plats, veuillez demander à notre personnel",
        
        // Menu button
        menu_button: "Voir Menu Complet",
        
        // Order section
        order_title: "COMMANDER",
        order_call: "par téléphone",
        
        // Hours section
        hours_title: "HORAIRES",
        monday: "Lundi: Fermé",
        tuesday: "Mardi: Fermé",
        wednesday: "Mercredi: 18:30 – 21:15",
        thursday: "Jeudi: 18:30 – 21:15",
        friday: "Vendredi: 18:00 – 21:30",
        saturday: "Samedi: 18:00 – 21:45",
        sunday: "Dimanche: 18:00 – 21:15",
        
        // Catering section
        catering_title: "TRAITEUR",
        catering_desc: "Disponible pour événements spéciaux et fêtes privées",
        catering_group_size: "Groupes de 15 à 100 personnes",
        catering_menu: "Menu personnalisé",
        catering_location: "À l'endroit de votre choix",
        catering_contact: "Contactez-nous pour des devis:",
        catering_note: "Veuillez inclure les détails suivants pour un devis:",
        catering_people: "Nombre de personnes",
        catering_place: "Emplacement",
        catering_date: "Date et heure",
        catering_event: "Type d'événement ou d'occasion",
        
        // Location section
        location_title: "EMPLACEMENT",
        address_line1: "Assumadas-Tunes, route nationale 269",
        address_line2: "8365-235 Silves",
        
        // Social media section
        social_title: "SUIVEZ-NOUS",
        
        // Footer
        contact: "contact:",
        
        // Catering page
        catering_hero_title: "Service Traiteur",
        catering_hero_subtitle: "Pizza authentique cuite au feu de bois pour votre événement spécial",
        catering_email_title: "Contactez-Nous",
        catering_email_text1: "Nous proposons des services de traiteur pour les événements d'entreprise, mariages et fêtes privées. Pour demander plus d'informations ou obtenir un devis personnalisé, veuillez nous contacter par email:",
        catering_email_text2: "Ou contactez-nous directement par téléphone:"
    }
};

// Current language (default: Portuguese)
let currentLang = 'pt';

// Function to translate the page
function translatePage(lang) {
    currentLang = lang;
    
    // Update document language
    document.documentElement.lang = lang;
    
    const t = translations[lang];
    if (!t) return; // If translation not found, exit
    
    // Detect if we're on catering page
    const isCateringPage = document.querySelector('.hero-section') !== null;
    
    if (isCateringPage) {
        // Translate catering page specific elements
        const heroTitle = document.querySelector('.hero-title');
        if (heroTitle) heroTitle.textContent = t.catering_hero_title;
        
        const heroSubtitle = document.querySelector('.hero-subtitle');
        if (heroSubtitle) heroSubtitle.textContent = t.catering_hero_subtitle;
        
        const emailTitle = document.querySelector('.email-title');
        if (emailTitle) emailTitle.textContent = t.catering_email_title;
        
        const emailTexts = document.querySelectorAll('.email-text');
        if (emailTexts.length >= 2) {
            emailTexts[0].textContent = t.catering_email_text1;
            emailTexts[1].textContent = t.catering_email_text2;
        }
    } else {
        // Translate pizza cards
        const pizzaCards = document.querySelectorAll('.pizza-card');
        if (pizzaCards.length >= 6) {
            // Pepperoni
            pizzaCards[0].querySelector('h2').textContent = t.pepperoni_title;
            pizzaCards[0].querySelector('p').textContent = t.pepperoni_desc;
            
            // Camponesa
            pizzaCards[1].querySelector('h2').textContent = t.camponesa_title;
            pizzaCards[1].querySelector('p').textContent = t.camponesa_desc;
            
            // Tentação
            pizzaCards[2].querySelector('h2').textContent = t.tentacao_title;
            pizzaCards[2].querySelector('p').textContent = t.tentacao_desc;
            
            // Saborosa
            pizzaCards[3].querySelector('h2').textContent = t.saborosa_title;
            pizzaCards[3].querySelector('p').textContent = t.saborosa_desc;
            
            // Pé de Cabra
            pizzaCards[4].querySelector('h2').textContent = t.pedecabra_title;
            pizzaCards[4].querySelector('p').textContent = t.pedecabra_desc;
            
            // Margherita
            pizzaCards[5].querySelector('h2').textContent = t.margherita_title;
            pizzaCards[5].querySelector('p').textContent = t.margherita_desc;
        }
        
        // Translate allergy info
        const allergyInfo = document.querySelector('.allergy-info p');
        if (allergyInfo) allergyInfo.textContent = t.allergy_info;
        
        // Translate menu button
        const menuLink = document.querySelector('.menu-link');
        if (menuLink) menuLink.textContent = t.menu_button;
        
        // Translate order section
        const orderTitle = document.querySelector('.order-section h2');
        if (orderTitle) orderTitle.textContent = t.order_title;
        
        const orderText = document.querySelector('.order-section .order-text');
        if (orderText) orderText.textContent = t.order_call;
        
        // Translate hours section
        const hoursTitle = document.querySelector('.opening-hours-section h2');
        if (hoursTitle) hoursTitle.textContent = t.hours_title;
        
        const hoursParagraphs = document.querySelectorAll('.hours-content p');
        if (hoursParagraphs.length >= 7) {
            hoursParagraphs[0].textContent = t.monday;
            hoursParagraphs[1].textContent = t.tuesday;
            hoursParagraphs[2].textContent = t.wednesday;
            hoursParagraphs[3].textContent = t.thursday;
            hoursParagraphs[4].textContent = t.friday;
            hoursParagraphs[5].textContent = t.saturday;
            hoursParagraphs[6].textContent = t.sunday;
        }
        
        // Translate catering section
        const cateringTitle = document.querySelector('.catering-section h2');
        if (cateringTitle) cateringTitle.textContent = t.catering_title;
        
        const cateringText = document.querySelector('.catering-text');
        if (cateringText) cateringText.textContent = t.catering_desc;
        
        const cateringDetails = document.querySelectorAll('.catering-detail span');
        if (cateringDetails.length >= 3) {
            cateringDetails[0].textContent = t.catering_group_size;
            cateringDetails[1].textContent = t.catering_menu;
            cateringDetails[2].textContent = t.catering_location;
        }
        
        const cateringContact = document.querySelector('.catering-contact');
        if (cateringContact) cateringContact.textContent = t.catering_contact;
        
        const cateringNote = document.querySelector('.catering-note');
        if (cateringNote) cateringNote.textContent = t.catering_note;
        
        const cateringRequirements = document.querySelectorAll('.catering-requirements li');
        if (cateringRequirements.length >= 4) {
            // Extract text content without the icon
            const extractText = (li) => {
                const newLi = li.cloneNode(true);
                const icon = newLi.querySelector('i');
                if (icon) icon.remove();
                return newLi.textContent.trim();
            };
            
            // Replace text content while preserving icon
            const updateLiText = (li, text) => {
                const icon = li.querySelector('i');
                li.textContent = '';
                if (icon) li.appendChild(icon);
                li.appendChild(document.createTextNode(' ' + text));
            };
            
            updateLiText(cateringRequirements[0], t.catering_people);
            updateLiText(cateringRequirements[1], t.catering_place);
            updateLiText(cateringRequirements[2], t.catering_date);
            updateLiText(cateringRequirements[3], t.catering_event);
        }
    }
    
    // Common elements for both pages
    
    // Translate location section
    const locationTitle = document.querySelector('.location-section h2');
    if (locationTitle) locationTitle.textContent = t.location_title;
    
    const addressParagraphs = document.querySelectorAll('.address p');
    if (addressParagraphs.length >= 2) {
        addressParagraphs[0].textContent = t.address_line1;
        addressParagraphs[1].textContent = t.address_line2;
    }
    
    // Translate social section
    const socialTitle = document.querySelector('.social-section h2');
    if (socialTitle) socialTitle.textContent = t.social_title;
    
    // Translate footer
    const footerContact = document.querySelector('.footer-contact p');
    if (footerContact && footerContact.firstChild && footerContact.firstChild.nodeType === Node.TEXT_NODE) {
        footerContact.firstChild.nodeValue = t.contact + ' ';
    }
}

// Language toggle functionality
document.querySelectorAll('.language-toggle a').forEach(button => {
    button.addEventListener('click', function(e) {
        e.preventDefault();
        // Remove active class from all buttons
        document.querySelectorAll('.language-toggle a').forEach(btn => {
            btn.classList.remove('active');
        });
        
        // Add active class to clicked button
        this.classList.add('active');
        
        // Translate page
        const lang = this.getAttribute('data-lang');
        translatePage(lang);
    });
});

// Scroll animation system
function initScrollAnimations() {
    // Elements to animate on scroll
    const animatedElements = document.querySelectorAll('.scroll-animate');
    
    // Set up IntersectionObserver
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            // Add animation class when element enters viewport
            if (entry.isIntersecting) {
                // Get delay from data attribute if exists
                const delay = entry.target.dataset.delay;
                
                if (delay) {
                    // Apply delayed animation
                    setTimeout(() => {
                        entry.target.classList.add('animate');
                    }, parseFloat(delay) * 1000);
                } else {
                    // Apply immediate animation
                    entry.target.classList.add('animate');
                }
                
                // Unobserve after animation is triggered (optional)
                // This ensures the animation only happens once
                observer.unobserve(entry.target);
            }
        });
    }, {
        root: null, // Use viewport as root
        threshold: 0.15, // Trigger when 15% of element is visible
        rootMargin: '0px 0px -100px 0px' // Trigger slightly before element enters viewport
    });
    
    // Observe all elements with scroll-animate class
    animatedElements.forEach(element => {
        observer.observe(element);
        
        // Add animation type class based on data attribute
        const animationType = element.dataset.animation || 'fade-up';
        element.classList.add(animationType);
    });
}

document.addEventListener('DOMContentLoaded', function() {
    const body = document.body;
    
    // Add smooth page load 
    document.body.classList.add('page-loaded');
    
    // Initialize scroll animations
    setTimeout(() => {
        initScrollAnimations();
    }, 100);
    
    // Re-check scroll animations on scroll
    window.addEventListener('scroll', () => {
        requestAnimationFrame(() => {
            initScrollAnimations();
        });
    }, { passive: true });
});

// Initialize page in Portuguese
translatePage('pt');